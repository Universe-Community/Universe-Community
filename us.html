<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Universe Scan - Traducciones Profesionales de Manga y Manhwa</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      xintegrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="asset/css/us.css" />
  </head>
  <body class="light-mode">
    <header class="site-header" id="header">
      <div class="container">
        <div class="header-inner">
          <a href="#inicio" class="logo-link">
            <div class="logo-icon-box">US</div>
            <span class="logo-full-text">Universe Scan</span>
          </a>
          <div class="nav-controls">
            <nav class="main-menu" id="mainMenuNav">
              <!-- Encabezado del Menú Móvil -->
              <div class="mobile-menu-header">
                <a href="#inicio" class="logo-link">
                  <div class="logo-icon-box">US</div>
                  <span class="logo-full-text">Universe Scan</span>
                </a>
                <div class="menu-header-controls">
                  <button
                    class="theme-toggle-button"
                    id="themeToggleBtnMobile"
                    aria-label="Cambiar tema"
                  >
                    <i class="fas fa-moon"></i
                    ><i class="fas fa-sun" style="display: none"></i>
                  </button>
                  <button
                    class="nav-toggle-btn"
                    id="mobileMenuCloseBtn"
                    aria-label="Cerrar menú"
                  >
                    <i class="fas fa-times"></i>
                  </button>
                </div>
              </div>
              <ul>
                <li><a href="#inicio" class="current-page">Inicio</a></li>
                <!-- Elemento de Menú "Universe Scan" con Submenú -->
                <li class="menu-section-header" id="universeCommunityToggle">
                  <a
                    href="#"
                    class="menu-header-link"
                    aria-haspopup="true"
                    aria-expanded="false"
                  >
                    Universe Scan <i class="fas fa-chevron-down"></i>
                  </a>
                  <ul class="submenu">
                    <li><a href="#proyectos">Proyectos</a></li>
                    <li><a href="#avisos">Avisos</a></li>
                    <li><a href="#donacion">Donación</a></li>
                  </ul>
                </li>
                <li><a href="#reclutamiento">Reclutamiento</a></li>
                <li><a href="#faq">FAQ</a></li>
              </ul>
            </nav>
            <!-- Botón de Cambio de Tema para Escritorio -->
            <button
              class="theme-toggle-button"
              id="themeToggleBtnDesktop"
              aria-label="Cambiar tema"
            >
              <i class="fas fa-moon"></i
              ><i class="fas fa-sun" style="display: none"></i>
            </button>
            <!-- Botón Principal del Encabezado para Abrir Menú Móvil -->
            <button
              class="nav-toggle-btn"
              id="navToggleBtn"
              aria-label="Abrir menú"
            >
              <i class="fas fa-bars"></i>
            </button>
          </div>
        </div>
      </div>
    </header>

    <main>
      <!-- Sección Hero -->
      <section class="hero" id="inicio">
        <div class="container">
          <h1 class="hero-main-title">
            Traduciendo Universos,
            <span class="highlight-text">Una Página a la Vez</span>
          </h1>
          <p class="hero-sub-title">
            Somos un scan de fans para fans, apasionados por traer los mejores
            mangas, manhwas y manhuas al español con la máxima calidad y
            fidelidad.
          </p>
          <div class="hero-button-group">
            <a href="#proyectos" class="btn btn-primary">Explorar Proyectos</a>
            <a
              href="https://t.me/universescanteam"
              target="_blank"
              rel="noopener noreferrer"
              class="btn btn-secondary"
              ><i class="fab fa-telegram-plane"></i> Únete a la Comunidad</a
            >
          </div>
        </div>
      </section>

      <!-- Sección Últimos Lanzamientos - Ahora un Carrusel -->
      <section class="latest-releases">
        <div class="container">
          <h2 class="block-title">Últimos Lanzamientos</h2>
          <p class="block-subtitle">
            Mantente al día con los capítulos más recientes de tus series
            favoritas.
          </p>
          <div class="carousel-container">
            <div class="carousel-track" id="latest-releases-carousel-track">
              <!-- Los lanzamientos se insertarán aquí dinámicamente -->
            </div>
            <div class="carousel-navigation">
              <button
                class="carousel-nav-btn prev"
                id="latest-prev-btn"
                aria-label="Anterior lanzamiento"
              >
                <i class="fas fa-chevron-left"></i>
              </button>
              <button
                class="carousel-nav-btn next"
                id="latest-next-btn"
                aria-label="Siguiente lanzamiento"
              >
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Sección de Proyectos -->
      <section id="proyectos" class="projects-section">
        <div class="container">
          <h2 class="block-title">Catálogo de Proyectos</h2>
          <p class="block-subtitle">
            Navega, busca y filtra en nuestra creciente biblioteca. Encuentra tu
            próxima lectura favorita.
          </p>

          <div class="filters-container">
            <div class="search-box">
              <i class="fas fa-search"></i>
              <input
                type="text"
                id="search-input"
                placeholder="Buscar por nombre, género o staff..."
              />
            </div>
            <div class="filter-group" id="status-filters">
              <button
                class="filter-btn active"
                data-filter="all"
                data-group="status"
              >
                Todos los Estados
              </button>
              <button
                class="filter-btn"
                data-filter="En Emisión"
                data-group="status"
              >
                En Emisión
              </button>
              <button
                class="filter-btn"
                data-filter="Finalizado"
                data-group="status"
              >
                Finalizados
              </button>
            </div>
            <div class="filter-group" id="type-filters">
              <button
                class="filter-btn active"
                data-filter="all"
                data-group="type"
              >
                Todos los Tipos
              </button>
              <button class="filter-btn" data-filter="Manhwa" data-group="type">
                Manhwa
              </button>
              <button class="filter-btn" data-filter="Manhua" data-group="type">
                Manhua
              </button>
              <button class="filter-btn" data-filter="Manga" data-group="type">
                Manga
              </button>
            </div>
          </div>

          <div class="projects-grid" id="projects-grid">
            <!-- Los proyectos se insertarán aquí dinámicamente -->
          </div>
        </div>
      </section>

      <!-- Sección Avisos - Ahora un Carrusel -->
      <section id="avisos" class="avisos-section">
        <div class="container">
          <h2 class="block-title">Avisos Importantes</h2>
          <p class="block-subtitle">
            Mantente al tanto de las últimas noticias y comunicados de Universe
            Scan.
          </p>
          <div class="carousel-container">
            <div class="carousel-track" id="avisos-carousel-track">
              <!-- Los avisos se insertarán aquí dinámicamente -->
            </div>
            <div class="carousel-navigation">
              <button
                class="carousel-nav-btn prev"
                id="avisos-prev-btn"
                aria-label="Aviso anterior"
              >
                <i class="fas fa-chevron-left"></i>
              </button>
              <button
                class="carousel-nav-btn next"
                id="avisos-next-btn"
                aria-label="Siguiente aviso"
              >
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Sección Donación - Ahora con un Botón de Donar -->
      <section id="donacion" class="donacion-section">
        <div class="container">
          <h2 class="block-title">Apoya a Universe Scan</h2>
          <p class="block-subtitle">
            Tu apoyo nos ayuda a seguir trayendo las mejores historias y a
            mantener la calidad de nuestras traducciones. ¡Cada pequeña
            contribución cuenta!
          </p>
          <a
            href="https://www.paypal.com/paypalme/universescan"
            target="_blank"
            rel="noopener noreferrer"
            class="donate-button"
          >
            <i class="fas fa-heart"></i> Donar Ahora
          </a>
        </div>
      </section>

      <!-- Sección de Reclutamiento -->
      <section id="reclutamiento" class="recruitment-section">
        <div class="container recruitment-container">
          <div class="recruitment-info">
            <h3>Forma Parte de Nuestro Universo</h3>
            <p>
              La pasión es nuestro motor. Si amas las historias tanto como
              nosotros y quieres contribuir a la comunidad, ¡te estamos
              buscando! No necesitas ser un experto, solo tener ganas de
              aprender y trabajar en equipo.
            </p>
            <a
              href="https://t.me/universescanteam"
              target="_blank"
              rel="noopener noreferrer"
              class="btn btn-primary"
              ><i class="fas fa-paper-plane"></i> Aplicar en Telegram</a
            >
          </div>
          <div class="roles-grid">
            <div class="role-card">
              <div class="role-icon"><i class="fas fa-language"></i></div>
              <h4 class="role-title">Traductor</h4>
              <ul class="role-list">
                <li>
                  <i class="fas fa-check-circle"></i>
                  <strong>Requisito:</strong> Nivel intermedio/avanzado de
                  Inglés, Coreano o Japonés.
                </li>
                <li>
                  <i class="fas fa-star"></i> <strong>Beneficio:</strong> Acceso
                  anticipado a capítulos.
                </li>
              </ul>
            </div>
            <div class="role-card">
              <div class="role-icon">
                <i class="fas fa-magic-wand-sparkles"></i>
              </div>
              <h4 class="role-title">Cleaner / Redrawer</h4>
              <ul class="role-list">
                <li>
                  <i class="fas fa-check-circle"></i>
                  <strong>Requisito:</strong> Manejo básico de Photoshop.
                </li>
                <li>
                  <i class="fas fa-star"></i>
                  <strong>Beneficio:</strong> Formación y recursos.
                </li>
              </ul>
            </div>
            <div class="role-card">
              <div class="role-icon"><i class="fas fa-font"></i></div>
              <h4 class="role-title">Typesetter</h4>
              <ul class="role-list">
                <li>
                  <i class="fas fa-check-circle"></i>
                  <strong>Requisito:</strong> Buena ortografía y atención al
                  detalle.
                </li>
                <li>
                  <i class="fas fa-star"></i>
                  <strong>Beneficio:</strong> Aprende sobre diseño editorial.
                </li>
              </ul>
            </div>
            <div class="role-card">
              <div class="role-icon"><i class="fas fa-check-double"></i></div>
              <h4 class="role-title">Corrector</h4>
              <ul class="role-list">
                <li>
                  <i class="fas fa-check-circle"></i>
                  <strong>Requisito:</strong> Excelente ortografía y gramática.
                </li>
                <li>
                  <i class="fas fa-star"></i> <strong>Beneficio:</strong> Eres
                  el sello de calidad final.
                </li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Sección de Preguntas Frecuentes -->
      <section id="faq" class="faq-section">
        <div class="container">
          <h2 class="block-title">Preguntas Frecuentes</h2>
          <p class="block-subtitle">
            Resolvemos tus dudas más comunes. Si no encuentras tu respuesta,
            contáctanos en nuestro Telegram.
          </p>
          <div class="faq-container" id="faq-container">
            <!-- Los elementos FAQ se insertarán aquí -->
          </div>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container footer-container">
        <div class="footer-column about">
          <a href="#inicio" class="logo-link" style="margin-bottom: 1rem">
            <div class="logo-icon-box">US</div>
            <span class="logo-full-text" style="color: #fff"
              >Universe Scan</span
            >
          </a>
          <p>
            Un scan de fans para fans, comprometidos con la calidad y la
            comunidad. Todo el material aquí presentado es para fines de
            difusión y entretenimiento.
          </p>
          <div class="footer-socials">
            <a
              href="https://t.me/universescanteam"
              target="_blank"
              rel="noopener noreferrer"
              class="social-icon-link"
              aria-label="Telegram"
              ><i class="fab fa-telegram-plane"></i
            ></a>
            <a
              href="https://tmofans.com"
              target="_blank"
              rel="noopener noreferrer"
              class="social-icon-link"
              aria-label="TuMangaOnline"
              ><i class="fas fa-book-open"></i
            ></a>
          </div>
        </div>
        <div class="footer-column">
          <h4 class="footer-heading">Navegación</h4>
          <ul class="footer-links">
            <li><a href="#inicio">Inicio</a></li>
            <li><a href="#proyectos">Proyectos</a></li>
            <li><a href="#reclutamiento">Reclutamiento</a></li>
            <li><a href="#faq">FAQ</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h4 class="footer-heading">Proyectos Populares</h4>
          <ul class="footer-links" id="popular-projects-footer">
            <!-- Los enlaces se insertarán aquí dinámicamente -->
          </ul>
        </div>
        <div class="footer-column">
          <h4 class="footer-heading">Legal</h4>
          <ul class="footer-links">
            <li><a href="#">Aviso de Contenido</a></li>
            <li><a href="#">Apoya a los Autores</a></li>
          </ul>
        </div>
      </div>
      <div class="container footer-bottom">
        &copy; 2024 Universe Scan. No somos dueños de ninguna de las obras
        presentadas.
      </div>
    </footer>

    <!-- Modal de Detalles del Proyecto -->
    <div class="modal-overlay" id="project-modal">
      <div class="modal-content" id="modal-content">
        <!-- El contenido del modal se insertará dinámicamente -->
      </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // --- Simulación de Base de Datos ---
        const db = {
          projects: [
            {
              id: 1,
              title: 'El Regreso del Mago de Clase 8',
              coverImage:
                'https://placehold.co/400x600/50C0FF/FFFFFF?text=Mago+Clase+8',
              synopsis:
                'Tras ser traicionado por su camarada más cercano y asesinado, el mago más poderoso de la historia regresa 20 años al pasado. Ahora, armado con el conocimiento del futuro, se prepara para una venganza meticulosa y para evitar la catástrofe que se avecina.',
              status: 'En Emisión',
              type: 'Manhwa',
              genres: ['Acción', 'Fantasía', 'Regresión', 'Venganza', 'Magia'],
              staff: {
                translator: 'Aria',
                cleaner: 'Jin',
                typesetter: 'Ken',
                corrector: 'Elena',
              },
              chapters: [
                {
                  num: 15,
                  tmoLink: 'https://tmofans.com/chapter/12345/15',
                  telegramLink: 'https://t.me/universescanteam/chapter15',
                },
                {
                  num: 14,
                  tmoLink: 'https://tmofans.com/chapter/12345/14',
                  telegramLink: 'https://t.me/universescanteam/chapter14',
                },
                {
                  num: 13,
                  tmoLink: 'https://tmofans.com/chapter/12345/13',
                  telegramLink: 'https://t.me/universescanteam/chapter13',
                },
              ],
            },
            {
              id: 2,
              title: 'Leyenda del Miríada de Dragones',
              coverImage:
                'https://placehold.co/400x600/CB6CE6/FFFFFF?text=Dragones',
              synopsis:
                'En un mundo de artes marciales, Nie Li es uno de los más grandes espiritistas demoníacos. Sin embargo, pierde la vida durante una batalla. Su alma renace en su yo de 13 años. ¿Podrá cambiar su destino y el de sus seres queridos?',
              status: 'En Emisión',
              type: 'Manhua',
              genres: [
                'Artes Marciales',
                'Aventura',
                'Reencarnación',
                'Cultivo',
              ],
              staff: { translator: 'Sora', cleaner: 'Leo', typesetter: 'Mika' },
              chapters: [
                {
                  num: 350,
                  tmoLink: 'https://tmofans.com/chapter/67890/350',
                  telegramLink: 'https://t.me/universescanteam/chapter350',
                },
                {
                  num: 349,
                  tmoLink: 'https://tmofans.com/chapter/67890/349',
                  telegramLink: 'https://t.me/universescanteam/chapter349',
                },
                {
                  num: 348,
                  tmoLink: 'https://tmofans.com/chapter/67890/348',
                  telegramLink: 'https://t.me/universescanteam/chapter348',
                },
              ],
            },
            {
              id: 3,
              title: 'La Sombra del Monarca',
              coverImage:
                'https://placehold.co/400x600/EE8880/FFFFFF?text=Monarca',
              synopsis:
                'Conocido como el cazador más débil de toda la humanidad, la contribución de Sung Jinwoo a las incursiones se limita a intentar que no lo maten. Un día, se encuentra con una doble mazmorra que cambiará su vida para siempre.',
              status: 'Finalizado',
              type: 'Manhwa',
              genres: ['Acción', 'Fantasía', 'Sistema', 'Aventura', 'Dungeons'],
              staff: {
                translator: 'Yuki',
                cleaner: 'Ryu',
                typesetter: 'Hana',
                corrector: 'Diego',
              },
              chapters: [
                {
                  num: 179,
                  tmoLink: 'https://tmofans.com/chapter/11223/179',
                  telegramLink: 'https://t.me/universescanteam/chapter179',
                },
                {
                  num: 178,
                  tmoLink: 'https://tmofans.com/chapter/11223/178',
                  telegramLink: 'https://t.me/universescanteam/chapter178',
                },
              ],
            },
            {
              id: 4,
              title: 'My Hero Academia',
              coverImage: 'https://placehold.co/400x600/8888EE/FFFFFF?text=MHA',
              synopsis:
                'Izuku Midoriya, un chico sin poderes en un mundo donde son la norma, sueña con ser un héroe. Su vida cambia al conocer a su ídolo, All Might, quien le otorga sus poderes y lo inscribe en una academia para héroes.',
              status: 'En Emisión',
              type: 'Manga',
              genres: ['Superhéroes', 'Acción', 'Escolar', 'Poderes'],
              staff: { translator: 'Sora', cleaner: 'Jin', typesetter: 'Ken' },
              chapters: [
                {
                  num: 420,
                  tmoLink: 'https://tmofans.com/chapter/44556/420',
                  telegramLink: 'https://t.me/universescanteam/chapter420',
                },
                {
                  num: 419,
                  tmoLink: 'https://tmofans.com/chapter/44556/419',
                  telegramLink: 'https://t.me/universescanteam/chapter419',
                },
                {
                  num: 418,
                  tmoLink: 'https://tmofans.com/chapter/44556/418',
                  telegramLink: 'https://t.me/universescanteam/chapter418',
                },
              ],
            },
            {
              id: 5,
              title: "Omniscient Reader's Viewpoint",
              coverImage:
                'https://placehold.co/400x600/F469DB/FFFFFF?text=Lector',
              synopsis:
                'Kim Dokja es un empleado normal cuya única afición es leer su novela web favorita. Cuando, de repente, el mundo se convierte en la novela que él leía, Dokja es la única persona que sabe cómo acabará el mundo.',
              status: 'En Emisión',
              type: 'Manhwa',
              genres: ['Apocalíptico', 'Acción', 'Fantasía', 'Transmigración'],
              staff: { translator: 'Aria', cleaner: 'Leo', typesetter: 'Hana' },
              chapters: [
                {
                  num: 120,
                  tmoLink: 'https://tmofans.com/chapter/77889/120',
                  telegramLink: 'https://t.me/universescanteam/chapter120',
                },
                {
                  num: 119,
                  tmoLink: 'https://tmofans.com/chapter/77889/119',
                  telegramLink: 'https://t.me/universescanteam/chapter119',
                },
              ],
            },
            {
              id: 6,
              title: 'El Villano Quiere Vivir',
              coverImage:
                'https://placehold.co/400x600/6A5ACD/FFFFFF?text=Villano',
              synopsis:
                'Un hombre se reencarna como un villano menor en la novela que acababa de leer. Para sobrevivir en este mundo cruel, debe usar su conocimiento de la trama y sus habilidades para cambiar su destino y el de los que lo rodean.',
              status: 'En Emisión',
              type: 'Manhwa',
              genres: [
                'Fantasía',
                'Isekai',
                'Reencarnación',
                'Acción',
                'Romance',
              ],
              staff: {
                translator: 'Leo',
                cleaner: 'Jin',
                typesetter: 'Mika',
                corrector: 'Sara',
              },
              chapters: [
                {
                  num: 85,
                  tmoLink: 'https://tmofans.com/chapter/99887/85',
                  telegramLink: 'https://t.me/universescanteam/chapter85',
                },
                {
                  num: 84,
                  tmoLink: 'https://tmofans.com/chapter/99887/84',
                  telegramLink: 'https://t.me/universescanteam/chapter84',
                },
              ],
            },
            {
              id: 7,
              title: 'El Gran Mago de la Torre',
              coverImage:
                'https://placehold.co/400x600/FFA07A/FFFFFF?text=Torre',
              synopsis:
                'Un joven huérfano con un talento oculto para la magia es aceptado en la prestigiosa Torre de Magia. Allí, descubre conspiraciones y secretos ancestrales mientras lucha por convertirse en el mago más grande de su era.',
              status: 'En Emisión',
              type: 'Manhwa',
              genres: ['Fantasía', 'Aventura', 'Magia', 'Crecimiento'],
              staff: {
                translator: 'Elena',
                cleaner: 'Hana',
                typesetter: 'Yuki',
              },
              chapters: [
                {
                  num: 50,
                  tmoLink: 'https://tmofans.com/chapter/11122/50',
                  telegramLink: 'https://t.me/universescanteam/chapter50',
                },
                {
                  num: 49,
                  tmoLink: 'https://tmofans.com/chapter/11122/49',
                  telegramLink: 'https://t.me/universescanteam/chapter49',
                },
              ],
            },
            {
              id: 8,
              title: 'Solo Leveling',
              coverImage:
                'https://placehold.co/400x600/FFD700/000000?text=Solo+Leveling',
              synopsis:
                "Diez años después de la aparición de las 'Puertas' que conectan el mundo real con el mundo de los monstruos, el cazador más débil, Sung Jinwoo, recibe un misterioso 'Sistema' que le permite subir de nivel como en un videojuego.",
              status: 'Finalizado',
              type: 'Manhwa',
              genres: ['Acción', 'Fantasía', 'Sistema', 'Mazmorras', 'Poderes'],
              staff: {
                translator: 'Yuki',
                cleaner: 'Jin',
                typesetter: 'Leo',
                corrector: 'Aria',
              },
              chapters: [
                {
                  num: 179,
                  tmoLink: 'https://tmofans.com/chapter/12121/179',
                  telegramLink: 'https://t.me/universescanteam/chapter179',
                },
                {
                  num: 178,
                  tmoLink: 'https://tmofans.com/chapter/12121/178',
                  telegramLink: 'https://t.me/universescanteam/chapter178',
                },
              ],
            },
          ],
          faqs: [
            {
              q: '¿Puedo resubir sus proyectos a otras plataformas?',
              a: 'No. Pedimos por favor que no resuban nuestro trabajo. Apóyanos leyendo directamente desde TMO, ya que es nuestra plataforma principal para la difusión, o únete a nuestro canal de Telegram para actualizaciones y descargas directas.',
            },
            {
              q: '¿Cómo puedo unirme al scan?',
              a: "¡Nos encanta que estés interesado! Puedes unirte a nuestro equipo aplicando a través de nuestro grupo de Telegram. Revisa la sección de 'Reclutamiento' para más detalles sobre los roles disponibles y los requisitos.",
            },
            {
              q: '¿Con qué frecuencia publican capítulos?',
              a: 'La frecuencia de publicación depende de varios factores, como la disponibilidad del staff, la dificultad del proyecto y el estado de la serie original. Nos esforzamos por mantener un ritmo constante y de alta calidad.',
            },
            {
              q: '¿Puedo sugerir un proyecto para traducir?',
              a: '¡Claro que sí! Nos encantan las sugerencias. Puedes proponer nuevos proyectos en nuestro grupo de Telegram. Evaluaremos las propuestas según la demanda, la disponibilidad del material y el interés de nuestro equipo.',
            },
            {
              q: '¿Dónde puedo encontrar todos sus proyectos?',
              a: 'Todos nuestros proyectos están disponibles en nuestra página de TuMangaOnline (TMO). También anunciamos cada nuevo capítulo y proyecto en nuestro canal de Telegram. ¡Asegúrate de seguirnos en ambos!',
            },
          ],
          notices: [
            {
              id: 1,
              title: 'Mantenimiento Programado',
              content:
                'Informamos que habrá un breve mantenimiento en la base de datos el 30 de Julio a las 03:00 AM (UTC-5). Agradecemos su comprensión.',
              date: '25/06/2024',
            },
            {
              id: 2,
              title: '¡Nuevo Proyecto Anunciado!',
              content:
                "Estamos emocionados de anunciar nuestro nuevo proyecto: 'El Legado del Héroe'. ¡Estén atentos para el primer capítulo!",
              date: '20/06/2024',
            },
            {
              id: 3,
              title: 'Reclutamiento Abierto',
              content:
                '¡Seguimos buscando traductores y typesetters! Si estás interesado, visita nuestra sección de Reclutamiento.',
              date: '15/06/2024',
            },
            {
              id: 4,
              title: 'Actualización de Discord',
              content:
                'Hemos actualizado nuestro servidor de Discord con nuevos canales y roles. ¡Únete para más interacciones!',
              date: '10/06/2024',
            },
            {
              id: 5,
              title: 'Felices Fiestas Patrias',
              content:
                '¡El equipo de Universe Scan les desea unas felices fiestas patrias a toda nuestra comunidad!',
              date: '28/07/2024',
            },
          ],
        };

        // --- Lógica de Cambio de Tema ---
        // IDs separados para los botones de cambio de tema de escritorio y móvil
        const themeToggleBtnDesktop = document.getElementById(
          'themeToggleBtnDesktop'
        );
        const themeToggleBtnMobile = document.getElementById(
          'themeToggleBtnMobile'
        );
        const currentTheme = localStorage.getItem('theme');

        function applyTheme(theme) {
          const allThemeToggleButtons = [
            themeToggleBtnDesktop,
            themeToggleBtnMobile,
          ].filter(Boolean); // Obtener ambos, filtrar nulos si alguno no existe

          allThemeToggleButtons.forEach((btn) => {
            const sunIcon = btn.querySelector('.fa-sun');
            const moonIcon = btn.querySelector('.fa-moon');

            if (theme === 'dark') {
              document.body.classList.add('dark-mode');
              if (sunIcon) sunIcon.style.display = 'inline-block';
              if (moonIcon) moonIcon.style.display = 'none';
            } else {
              document.body.classList.remove('dark-mode');
              if (sunIcon) sunIcon.style.display = 'none';
              if (moonIcon) moonIcon.style.display = 'inline-block';
            }
          });
        }

        if (currentTheme) {
          applyTheme(currentTheme);
        } else {
          const prefersDark =
            window.matchMedia &&
            window.matchMedia('(prefers-color-scheme: dark)').matches;
          if (prefersDark) {
            applyTheme('dark');
            localStorage.setItem('theme', 'dark');
          } else {
            applyTheme('light');
          }
        }

        // Añadir listener de eventos al botón de cambio de tema de escritorio
        if (themeToggleBtnDesktop) {
          themeToggleBtnDesktop.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            let theme = 'light';
            if (document.body.classList.contains('dark-mode')) {
              theme = 'dark';
            }
            localStorage.setItem('theme', theme);
            applyTheme(theme); // Actualizar todos los botones de cambio de tema
          });
        }
        // Añadir listener de eventos al botón de cambio de tema móvil
        if (themeToggleBtnMobile) {
          themeToggleBtnMobile.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            let theme = 'light';
            if (document.body.classList.contains('dark-mode')) {
              theme = 'dark';
            }
            localStorage.setItem('theme', theme);
            applyTheme(theme); // Actualizar todos los botones de cambio de tema
          });
        }

        // --- Menú de Navegación Móvil (Toggle Principal) ---
        const navToggleBtn = document.getElementById('navToggleBtn');
        const mainMenuNav = document.getElementById('mainMenuNav');
        const mobileMenuCloseBtn =
          document.getElementById('mobileMenuCloseBtn');

        const siteHeader = document.querySelector('.site-header');
        let headerHeight = siteHeader ? siteHeader.offsetHeight : 70;

        function updateHeaderHeightForMenu() {
          if (siteHeader) {
            headerHeight = siteHeader.offsetHeight;
            document.documentElement.style.setProperty(
              '--header-height',
              `${headerHeight}px`
            );
          }
        }
        updateHeaderHeightForMenu();
        window.addEventListener('resize', updateHeaderHeightForMenu);

        if (navToggleBtn && mainMenuNav) {
          const navIcon = navToggleBtn.querySelector('i');

          navToggleBtn.addEventListener('click', () => {
            const isExpanded = mainMenuNav.classList.toggle('menu-visible');
            navToggleBtn.setAttribute('aria-expanded', String(isExpanded));
            if (navIcon) {
              navIcon.classList.toggle('fa-bars', !isExpanded);
              navIcon.classList.toggle('fa-times', isExpanded);
            }
          });

          if (mobileMenuCloseBtn) {
            mobileMenuCloseBtn.addEventListener('click', () => {
              mainMenuNav.classList.remove('menu-visible');
              navToggleBtn.setAttribute('aria-expanded', 'false');
              const navIcon = navToggleBtn.querySelector('i');
              if (navIcon) {
                navIcon.classList.remove('fa-times');
                navIcon.classList.add('fa-bars');
              }
            });
          }
        }

        // --- Lógica de Alternancia del Submenú (acordeón Universe Scan) ---
        const universeCommunityToggle = document.getElementById(
          'universeCommunityToggle'
        );
        if (universeCommunityToggle) {
          const menuHeaderLink =
            universeCommunityToggle.querySelector('.menu-header-link');
          const submenu = universeCommunityToggle.querySelector('.submenu');

          if (menuHeaderLink && submenu) {
            menuHeaderLink.addEventListener('click', function (event) {
              event.preventDefault();
              event.stopPropagation();

              const isOpen = universeCommunityToggle.classList.toggle('open');
              menuHeaderLink.setAttribute('aria-expanded', String(isOpen));

              if (isOpen) {
                submenu.style.maxHeight = submenu.scrollHeight + 'px';
              } else {
                submenu.style.maxHeight = null;
              }
            });
          }
        }

        // --- Cerrar el menú móvil cuando se hace clic en un enlace de navegación directo (no en un submenú) ---
        if (mainMenuNav) {
          mainMenuNav.querySelectorAll('ul li a').forEach((link) => {
            link.addEventListener('click', (event) => {
              const isMenuHeaderLink = event.target.closest(
                '.menu-section-header'
              );

              if (
                !isMenuHeaderLink &&
                link.getAttribute('href') &&
                link.getAttribute('href') !== '#'
              ) {
                mainMenuNav.classList.remove('menu-visible');
                if (navToggleBtn) {
                  navToggleBtn.setAttribute('aria-expanded', 'false');
                  const navIcon = navToggleBtn.querySelector('i');
                  if (navIcon) {
                    navIcon.classList.remove('fa-times');
                    navIcon.classList.add('fa-bars');
                  }
                }
                mainMenuNav
                  .querySelectorAll('.menu-section-header.open')
                  .forEach((openSectionHeader) => {
                    openSectionHeader.classList.remove('open');
                    const openSubmenu =
                      openSectionHeader.querySelector('.submenu');
                    if (openSubmenu) openSubmenu.style.maxHeight = null;
                    const openHeaderLink =
                      openSectionHeader.querySelector('.menu-header-link');
                    if (openHeaderLink)
                      openHeaderLink.setAttribute('aria-expanded', 'false');
                  });
              }
            });
          });
        }

        // --- Resaltado de Enlaces de Navegación al Desplazarse (NavHighlighter) ---
        const sections = document.querySelectorAll('main section[id]');
        const allNavLinks = mainMenuNav
          ? mainMenuNav.querySelectorAll('nav ul li a')
          : [];
        const homeLink = mainMenuNav
          ? mainMenuNav.querySelector("a[href='#inicio']")
          : null;

        function navHighlighter() {
          if (!mainMenuNav || allNavLinks.length === 0) return;

          let scrollY = window.pageYOffset;
          let currentActiveSectionId = null;
          const offset = headerHeight + 60;

          sections.forEach((current) => {
            if (!current) return;
            const sectionHeight = current.offsetHeight;
            const sectionTop = current.offsetTop - offset;
            let sectionId = current.getAttribute('id');

            if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
              currentActiveSectionId = sectionId;
            }
          });

          allNavLinks.forEach((navLink) => {
            navLink.classList.remove('current-page');
          });

          let anActiveLinkIsSetByScroll = false;
          if (currentActiveSectionId) {
            const activeNavLink = mainMenuNav.querySelector(
              "a[href*='#" + currentActiveSectionId + "']"
            );
            if (activeNavLink) {
              activeNavLink.classList.add('current-page');
              anActiveLinkIsSetByScroll = true;
            }
          }

          if (!anActiveLinkIsSetByScroll && homeLink) {
            if (scrollY === 0) {
              homeLink.classList.add('current-page');
            }
          }
        }

        if (sections.length > 0 && allNavLinks.length > 0) {
          window.addEventListener('scroll', navHighlighter);
          window.addEventListener('hashchange', navHighlighter);
          navHighlighter();
        }

        // --- Funciones de Utilidad (escapeRegExp) ---
        function escapeRegExp(string) {
          return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        // --- Ayudante de Lógica del Carrusel ---
        function setupCarousel(trackId, prevBtnId, nextBtnId) {
          const track = document.getElementById(trackId);
          const prevBtn = document.getElementById(prevBtnId);
          const nextBtn = document.getElementById(nextBtnId);

          if (!track || !prevBtn || !nextBtn) {
            console.warn(
              `Elementos del carrusel no encontrados para trackId: ${trackId}`
            );
            return;
          }

          // Función para desplazar por un elemento
          function scrollCarousel(direction) {
            if (!track.firstElementChild) return; // No hay elementos para desplazar

            // Obtener el ancho calculado del elemento y el espacio entre ellos
            const itemWidth = track.firstElementChild.offsetWidth;
            const gap = parseFloat(getComputedStyle(track).gap);
            const scrollAmount = itemWidth + gap;

            if (direction === 'next') {
              track.scrollBy({ left: scrollAmount, behavior: 'smooth' });
            } else {
              track.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
            }
          }

          prevBtn.addEventListener('click', () => scrollCarousel('prev'));
          nextBtn.addEventListener('click', () => scrollCarousel('next'));
        }

        // --- Renderizado de Últimos Lanzamientos (Ahora Carrusel) ---
        const latestReleasesCarouselTrack = document.getElementById(
          'latest-releases-carousel-track'
        );
        function displayLatestReleases() {
          latestReleasesCarouselTrack.innerHTML = '';
          const latestProjects = db.projects
            .filter((p) => p.chapters && p.chapters.length > 0)
            .map((p) => ({
              ...p,
              latestChapterNum: Math.max(...p.chapters.map((c) => c.num)),
            }))
            .sort((a, b) => b.latestChapterNum - a.latestChapterNum)
            .slice(0, 8);

          if (latestProjects.length === 0) {
            latestReleasesCarouselTrack.innerHTML =
              '<p class="text-medium text-center" style="width: 100%;">No hay lanzamientos recientes disponibles en este momento.</p>';
            return;
          }

          latestProjects.forEach((project) => {
            const card = `
                    <a href="#" class="release-card" data-project-id="${project.id}">
                        <img src="${project.coverImage}" alt="${project.title} Cover" onerror="this.onerror=null;this.src='https://placehold.co/400x600/CCCCCC/333333?text=No+Image';" />
                        <div class="release-info">
                            <h3 class="release-title">${project.title}</h3>
                            <p class="release-chapter">Capítulo ${project.latestChapterNum}</p>
                        </div>
                    </a>
                `;
            latestReleasesCarouselTrack.innerHTML += card;
          });

          latestReleasesCarouselTrack
            .querySelectorAll('.release-card')
            .forEach((card) => {
              card.addEventListener('click', function (e) {
                e.preventDefault();
                const projectId = parseInt(this.dataset.projectId);
                openProjectModal(projectId);
              });
            });
        }

        // --- Renderizado de Avisos (Carrusel) ---
        const avisosCarouselTrack = document.getElementById(
          'avisos-carousel-track'
        );
        function displayNotices() {
          avisosCarouselTrack.innerHTML = '';
          if (db.notices.length === 0) {
            avisosCarouselTrack.innerHTML =
              '<p class="text-medium text-center" style="width: 100%;">No hay avisos disponibles en este momento.</p>';
            return;
          }

          db.notices.forEach((notice) => {
            const noticeCard = `
                    <div class="notice-card">
                        <h4>${notice.title}</h4>
                        <p>${notice.content}</p>
                        <span class="notice-date">${notice.date}</span>
                    </div>
                `;
            avisosCarouselTrack.innerHTML += noticeCard;
          });
        }

        // --- Renderizado y Filtrado de Proyectos (Grid) ---
        const projectsGrid = document.getElementById('projects-grid');
        const searchInput = document.getElementById('search-input');
        const statusFilters = document.getElementById('status-filters');
        const typeFilters = document.getElementById('type-filters');
        let currentStatusFilter = 'all';
        let currentTypeFilter = 'all';
        let currentSearchQuery = '';

        function displayProjects() {
          projectsGrid.innerHTML = '';
          let filteredProjects = db.projects;

          if (currentStatusFilter !== 'all') {
            filteredProjects = filteredProjects.filter(
              (project) => project.status === currentStatusFilter
            );
          }

          if (currentTypeFilter !== 'all') {
            filteredProjects = filteredProjects.filter(
              (project) => project.type === currentTypeFilter
            );
          }

          if (currentSearchQuery) {
            const query = escapeRegExp(currentSearchQuery.toLowerCase());
            filteredProjects = filteredProjects.filter((project) => {
              const titleMatch = project.title.toLowerCase().includes(query);
              const synopsisMatch = project.synopsis
                .toLowerCase()
                .includes(query);
              const genresMatch = project.genres.some((genre) =>
                genre.toLowerCase().includes(query)
              );
              const staffMatch = Object.values(project.staff || {}).some(
                (name) => name.toLowerCase().includes(query)
              );
              return titleMatch || synopsisMatch || genresMatch || staffMatch;
            });
          }

          if (filteredProjects.length === 0) {
            projectsGrid.innerHTML =
              '<p class="block-subtitle">No se encontraron proyectos que coincidan con tu búsqueda y filtros.</p>';
            return;
          }

          filteredProjects.forEach((project) => {
            const statusClass =
              project.status === 'En Emisión' ? 'emision' : 'finalizado';
            const card = `
                    <div class="project-card" data-project-id="${project.id}">
                        <img src="${project.coverImage}" alt="${
              project.title
            } Cover" class="project-card-image" onerror="this.onerror=null;this.src='https://placehold.co/400x600/CCCCCC/333333?text=No+Image';" />
                        <span class="project-card-status ${statusClass}">${
              project.status
            }</span>
                        <div class="project-card-content">
                            <span class="project-card-type">${
                              project.type
                            }</span>
                            <h3 class="project-card-title">${project.title}</h3>
                            <p class="project-card-synopsis">${project.synopsis.substring(
                              0,
                              120
                            )}...</p>
                        </div>
                    </div>
                `;
            projectsGrid.innerHTML += card;
          });

          projectsGrid.querySelectorAll('.project-card').forEach((card) => {
            card.addEventListener('click', function () {
              const projectId = parseInt(this.dataset.projectId);
              openProjectModal(projectId);
            });
          });
        }

        // --- Manejo de Filtros ---
        statusFilters.querySelectorAll('.filter-btn').forEach((button) => {
          button.addEventListener('click', function () {
            statusFilters
              .querySelector('.filter-btn.active')
              .classList.remove('active');
            this.classList.add('active');
            currentStatusFilter = this.dataset.filter;
            displayProjects();
          });
        });

        typeFilters.querySelectorAll('.filter-btn').forEach((button) => {
          button.addEventListener('click', function () {
            typeFilters
              .querySelector('.filter-btn.active')
              .classList.remove('active');
            this.classList.add('active');
            currentTypeFilter = this.dataset.filter;
            displayProjects();
          });
        });

        // --- Manejo de Búsqueda ---
        searchInput.addEventListener('input', function () {
          currentSearchQuery = this.value.trim();
          displayProjects();
        });

        // --- Modal de Detalles del Proyecto ---
        const projectModal = document.getElementById('project-modal');
        const modalContent = document.getElementById('modal-content');

        function openProjectModal(projectId) {
          const project = db.projects.find((p) => p.id === projectId);
          if (!project) return;

          const genresHtml = project.genres
            .map((genre) => `<span class="tag">${genre}</span>`)
            .join('');

          const staffDetails = `
                <div class="modal-detail-item"><strong>Traductor:</strong> <span>${
                  project.staff.translator || 'N/A'
                }</span></div>
                <div class="modal-detail-item"><strong>Cleaner:</strong> <span>${
                  project.staff.cleaner || 'N/A'
                }</span></div>
                <div class="modal-detail-item"><strong>Typesetter:</strong> <span>${
                  project.staff.typesetter || 'N/A'
                }</span></div>
                ${
                  project.staff.corrector
                    ? `<div class="modal-detail-item"><strong>Corrector:</strong> <span>${project.staff.corrector}</span></div>`
                    : ''
                }
            `;

          const sortedChapters = project.chapters
            .slice()
            .sort((a, b) => b.num - a.num);
          const chaptersHtml = sortedChapters
            .map(
              (chapter) => `
                <div class="chapter-item">
                    <span>Capítulo ${chapter.num}</span>
                    <div class="chapter-links">
                        ${
                          chapter.tmoLink
                            ? `<a href="${chapter.tmoLink}" target="_blank" rel="noopener noreferrer"><i class="fas fa-book-open"></i> TMO</a>`
                            : ''
                        }
                        ${
                          chapter.telegramLink
                            ? `<a href="${chapter.telegramLink}" target="_blank" rel="noopener noreferrer"><i class="fab fa-telegram-plane"></i> Telegram</a>`
                            : ''
                        }
                    </div>
                </div>
            `
            )
            .join('');

          modalContent.innerHTML = `
                <div class="modal-header">
                    <h2 class="modal-title">${project.title}</h2>
                    <button class="modal-close" aria-label="Cerrar modal"><i class="fas fa-times"></i></button>
                </div>
                <div class="modal-body">
                    <div class="modal-cover">
                        <img src="${project.coverImage}" alt="${project.title} Cover" onerror="this.onerror=null;this.src='https://placehold.co/400x600/CCCCCC/333333?text=No+Image';" />
                    </div>
                    <div class="modal-info">
                        <h3>Sinopsis</h3>
                        <p>${project.synopsis}</p>
                        <div class="modal-details-grid">
                            <div class="modal-detail-item"><strong>Estado:</strong> <span>${project.status}</span></div>
                            <div class="modal-detail-item"><strong>Tipo:</strong> <span>${project.type}</span></div>
                        </div>
                        <h3>Géneros</h3>
                        <div class="modal-tags">${genresHtml}</div>
                        <h3>Staff</h3>
                        <div class="modal-details-grid">${staffDetails}</div>
                        <div class="chapter-list-section">
                            <h3>Capítulos</h3>
                            <div class="chapter-list">${chaptersHtml}</div>
                        </div>
                    </div>
                </div>
            `;
          projectModal.style.display = 'flex'; // Mostrar modal

          document
            .querySelector('.modal-close')
            .addEventListener('click', closeProjectModal);
          projectModal.addEventListener('click', function (e) {
            if (e.target === projectModal) {
              closeProjectModal();
            }
          });
        }

        function closeProjectModal() {
          projectModal.style.display = 'none';
        }

        // --- Renderizado de FAQ ---
        const faqContainer = document.getElementById('faq-container');
        function displayFAQs() {
          faqContainer.innerHTML = '';
          db.faqs.forEach((faq, index) => {
            const faqItem = `
                    <div class="faq-item">
                        <div class="faq-question">
                            ${faq.q} <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>${faq.a}</p>
                        </div>
                    </div>
                `;
            faqContainer.innerHTML += faqItem;
          });

          faqContainer.querySelectorAll('.faq-question').forEach((question) => {
            question.addEventListener('click', function () {
              const parentItem = this.closest('.faq-item');
              const answer = parentItem.querySelector('.faq-answer');

              parentItem.classList.toggle('active');

              if (parentItem.classList.contains('active')) {
                answer.style.maxHeight = answer.scrollHeight + 'px';
              } else {
                answer.style.maxHeight = null;
              }
            });
          });
        }

        // --- Proyectos Populares en el Pie de Página ---
        const popularProjectsFooter = document.getElementById(
          'popular-projects-footer'
        );
        function populatePopularProjectsFooter() {
          popularProjectsFooter.innerHTML = '';
          const popularProjects = db.projects.slice(0, 5);
          popularProjects.forEach((project) => {
            const listItem = `<li><a href="#" data-project-id="${project.id}">${project.title}</a></li>`;
            popularProjectsFooter.innerHTML += listItem;
          });

          popularProjectsFooter.querySelectorAll('a').forEach((link) => {
            link.addEventListener('click', function (e) {
              e.preventDefault();
              const projectId = parseInt(this.dataset.projectId);
              openProjectModal(projectId);
            });
          });
        }

        // --- Inicialización al Cargar la Página ---
        displayLatestReleases();
        displayProjects();
        displayFAQs();
        populatePopularProjectsFooter();
        displayNotices();

        // Configurar carruseles
        setupCarousel(
          'latest-releases-carousel-track',
          'latest-prev-btn',
          'latest-next-btn'
        );
        setupCarousel(
          'avisos-carousel-track',
          'avisos-prev-btn',
          'avisos-next-btn'
        );
      });
    </script>
  </body>
</html>
